<div class="form-wrapper">
  <h2>Agregar Hamburguesa</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
    <div class="field">
      <label for="nombre">Nombre</label>
      <input id="nombre" type="text" formControlName="nombre" placeholder="Ej: Doble Queso" />
      <div class="error" *ngIf="f.nombre?.touched && f.nombre?.invalid">
        <span *ngIf="f.nombre?.errors?.['required']">El nombre es obligatorio.</span>
        <span *ngIf="f.nombre?.errors?.['minlength']">Mínimo 3 caracteres.</span>
      </div>
    </div>

    <div class="field">
      <label for="precio">Precio</label>
      <input id="precio" type="number" step="0.01" formControlName="precio" placeholder="Ej: 9.99" />
      <div class="error" *ngIf="f.precio?.touched && f.precio?.invalid">
        <span *ngIf="f.precio?.errors?.['required']">El precio es obligatorio.</span>
        <span *ngIf="f.precio?.errors?.['min']">Debe ser mayor o igual a 0.</span>
      </div>
    </div>

    <div class="field">
      <label for="descripcion">Descripción</label>
      <textarea id="descripcion" rows="3" formControlName="descripcion" placeholder="Opcional"></textarea>
      <div class="error" *ngIf="f.descripcion?.touched && f.descripcion?.invalid">
        <span *ngIf="f.descripcion?.errors?.['maxlength']">Máximo 300 caracteres.</span>
      </div>
    </div>

    <div class="field">
      <label for="imagenUrl">Imagen (URL)</label>
      <input id="imagenUrl" type="url" formControlName="imagenUrl" placeholder="https://..." />
      <div class="error" *ngIf="f.imagenUrl?.touched && f.imagenUrl?.invalid">
        <span *ngIf="f.imagenUrl?.errors?.['pattern']">Debe comenzar con http(s)://</span>
      </div>
    </div>

    <div class="actions">
      <button type="submit" [disabled]="form.invalid">Guardar</button>
    </div>
  </form>

  <div class="preview" *ngIf="form.value.nombre || form.value.precio || form.value.descripcion || form.value.imagenUrl">
    <h3>Vista previa</h3>
    <div class="card">
      <img *ngIf="form.value.imagenUrl" [src]="form.value.imagenUrl!" alt="preview" (error)="form.patchValue({ imagenUrl: '' })">
      <div class="info">
        <strong>{{ form.value.nombre || 'Sin nombre' }}</strong>
        <span class="price" *ngIf="form.value.precio">${{ form.value.precio }}</span>
        <p class="desc" *ngIf="form.value.descripcion">{{ form.value.descripcion }}</p>
      </div>
    </div>
  </div>
</div>

